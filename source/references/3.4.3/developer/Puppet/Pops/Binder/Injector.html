<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Puppet::Pops::Binder::Injector
  
    &mdash; Documentation by YARD 0.8.7.3
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../../';
  framesUrl = "../../../frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../../../_index.html">Index (I)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Puppet.html" title="Puppet (module)">Puppet</a></span></span> &raquo; <span class='title'><span class='object_link'>Pops</span></span> &raquo; <span class='title'><span class='object_link'>Binder</span></span>
     &raquo; 
    <span class="title">Injector</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../../../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../../../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Puppet::Pops::Binder::Injector
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'>Object</span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'>Object</span></li>
          
            <li class="next">Puppet::Pops::Binder::Injector</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/puppet/pops/binder/injector.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>The injector is the "lookup service" class</p>

<h2>Initialization</h2>

<p>The injector is initialized with a configured <span class='object_link'><a href="Binder.html" title="Puppet::Pops::Binder::Binder (class)">Binder</a></span>. The Binder instance contains a resolved set of
<code>key =&gt; "binding information"</code> that is used to setup the injector.</p>

<h2>Lookup</h2>

<p>It is possible to lookup either the value, or a producer of the value. The <span class='object_link'><a href="#lookup-instance_method" title="Puppet::Pops::Binder::Injector#lookup (method)">#lookup</a></span> method looks up a value, and the
<span class='object_link'><a href="#lookup_producer-instance_method" title="Puppet::Pops::Binder::Injector#lookup_producer (method)">#lookup_producer</a></span> looks up a producer.
Both of these methods can be called with three different signatures; <code>lookup(key)</code>, <code>lookup(type, name)</code>, and <code>lookup(name)</code>,
with the corresponding calls to obtain a producer; <code>lookup_producer(key)</code>, <code>lookup_producer(type, name)</code>, and <code>lookup_producer(name)</code>.</p>

<p>It is possible to pass a block to <span class='object_link'><a href="#lookup-instance_method" title="Puppet::Pops::Binder::Injector#lookup (method)">#lookup</a></span> and <span class='object_link'><a href="#lookup_producer-instance_method" title="Puppet::Pops::Binder::Injector#lookup_producer (method)">#lookup_producer</a></span>, the block is passed the result of the lookup
and the result of the block is returned as the value of the lookup. This is useful in order to provide a default value.</p>

<h2>Singleton or Not</h2>

<p>The lookup of a value is always based on the lookup of a producer. For <em>singleton producers</em> this means that the value is
determined by the first value lookup. Subsequent lookups via <code>lookup</code> or <code>lookup_producer</code> will produce the same instance.</p>

<p><em>Non singleton producers</em> will produce a new instance on each request for a value. For constant value producers this
means that a new deep-clone is produced for mutable objects (but not for immutable objects as this is not needed).
Custom producers should have non singleton behavior, or if this is not possible ensure that the produced result is
immutable. (The behavior if a custom producer hands out a mutable value and this is mutated is undefined).</p>

<p>Custom bound producers capable of producing a series of objects when bound as a singleton means that the producer
is a singleton, not the value it produces. If such a producer is bound as non singleton, each <code>lookup</code> will get a new
producer (hence, typically, restarting the series). However, the producer returned from <code>lookup_producer</code> will not
recreate the producer on each call to <code>produce</code>; i.e. each <code>lookup_producer</code> returns a producer capable of returning
a series of objects.</p>

<h2>Assisted Inject</h2>

<p>The injector supports lookup of instances of classes <em>even if the requested class is not explicitly bound</em>.
This is possible for classes that have a zero argument <code>initialize</code> method, or that has a class method called
<code>inject</code> that takes two arguments; <code>injector</code>, and <code>scope</code>.
This is useful in ruby logic as a class can then use the given injector to inject details.
An <code>inject</code> class method wins over a zero argument <code>initialize</code> in all cases.</p>

<h2>Access to key factory and type calculator</h2>

<p>It is important to use the same key factory, and type calculator as the binder. It is therefor possible to obtaint
these with the methods <span class='object_link'><a href="#key_factory-instance_method" title="Puppet::Pops::Binder::Injector#key_factory (method)">#key_factory</a></span>, and <span class='object_link'><a href="#type_calculator-instance_method" title="Puppet::Pops::Binder::Injector#type_calculator (method)">#type_calculator</a></span>.</p>

<h2>Special support for producers</h2>

<p>There is one method specially designed for producers. The <span class='object_link'><a href="#get_contributions-instance_method" title="Puppet::Pops::Binder::Injector#get_contributions (method)">#get_contributions</a></span> method returns an array of all contributions
to a given <em>contributions key</em>. This key is obtained from the <span class='object_link'><a href="#key_factory-instance_method" title="Puppet::Pops::Binder::Injector#key_factory (method)">#key_factory</a></span> for a given multibinding. The returned set of
contributed bindings is sorted in descending precedence order. Any conflicts, merges, etc. is performed by the multibinding
producer configured for a multibinding.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Lookup with default value</p>
</div></p>
      
      <pre class="example code"><code><span class='rubyid_injector identifier id'>injector</span><span class='dot token'>.</span><span class='rubyid_lookup identifier id'>lookup</span><span class='lparen token'>(</span><span class='string val'>'favourite_food'</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_x identifier id'>x</span><span class='bitor op'>|</span> <span class='rubyid_x identifier id'>x</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span> <span class='integer val'>? </span><span class='string val'>'bacon'</span> <span class='colon op'>:</span> <span class='rubyid_x identifier id'>x</span> <span class='rbrace token'>}</span>
</code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Using assisted inject</p>
</div></p>
      
      <pre class="example code"><code><span class='comment val'># Class with assisted inject support</span>
<span class='rubyid_class class kw'>class</span> <span class='rubyid_Duck constant id'>Duck</span>
  <span class='rubyid_attr_reader identifier id'>attr_reader</span> <span class='symbol val'>:name</span><span class='comma token'>,</span> <span class='symbol val'>:year_of_birth</span>

  <span class='rubyid_def def kw'>def</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_inject identifier id'>inject</span><span class='lparen token'>(</span><span class='rubyid_injector identifier id'>injector</span><span class='comma token'>,</span> <span class='rubyid_scope identifier id'>scope</span><span class='comma token'>,</span> <span class='rubyid_binding identifier id'>binding</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='rubyid_args identifier id'>args</span><span class='rparen token'>)</span>
    <span class='comment val'># lookup default name and year of birth, and use defaults if not present</span>
    <span class='rubyid_name identifier id'>name</span> <span class='assign token'>=</span> <span class='rubyid_injector identifier id'>injector</span><span class='dot token'>.</span><span class='rubyid_lookup identifier id'>lookup</span><span class='lparen token'>(</span><span class='rubyid_scope identifier id'>scope</span><span class='comma token'>,</span><span class='string val'>'default-duck-name'</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_x identifier id'>x</span><span class='bitor op'>|</span> <span class='rubyid_x identifier id'>x</span> <span class='integer val'>? </span><span class='rubyid_x identifier id'>x</span> <span class='colon op'>:</span> <span class='string val'>'Donald Duck'</span> <span class='rbrace token'>}</span>
    <span class='rubyid_year_of_birth identifier id'>year_of_birth</span> <span class='assign token'>=</span> <span class='rubyid_injector identifier id'>injector</span><span class='dot token'>.</span><span class='rubyid_lookup identifier id'>lookup</span><span class='lparen token'>(</span><span class='rubyid_scope identifier id'>scope</span><span class='comma token'>,</span><span class='string val'>'default-duck-year_of_birth'</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_x identifier id'>x</span><span class='bitor op'>|</span> <span class='rubyid_x identifier id'>x</span> <span class='integer val'>? </span><span class='rubyid_x identifier id'>x</span> <span class='colon op'>:</span> <span class='integer val'>1934</span> <span class='rbrace token'>}</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_year_of_birth identifier id'>year_of_birth</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_year_of_birth identifier id'>year_of_birth</span><span class='rparen token'>)</span>
    <span class='rubyid_@name ivar id'>@name</span> <span class='assign token'>=</span> <span class='rubyid_name identifier id'>name</span>
    <span class='rubyid_@year_of_birth ivar id'>@year_of_birth</span> <span class='assign token'>=</span> <span class='rubyid_year_of_birth identifier id'>year_of_birth</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>

<span class='rubyid_injector identifier id'>injector</span><span class='dot token'>.</span><span class='rubyid_lookup identifier id'>lookup</span><span class='lparen token'>(</span><span class='rubyid_scope identifier id'>scope</span><span class='comma token'>,</span> <span class='rubyid_Duck constant id'>Duck</span><span class='rparen token'>)</span>
<span class='comment val'># Produces a Duck named 'Donald Duck' or named after the binding 'default-duck-name' (and with similar treatment of</span>
<span class='comment val'># year_of_birth).</span>
</code></pre>
    
  </div>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Binder.html" title="Puppet::Pops::Binder::Binder (class)">Binder, for details about how to bind keys to producers</a></span></li>
    
      <li><span class='object_link'><a href="BindingsFactory.html" title="Puppet::Pops::Binder::BindingsFactory (module)">BindingsFactory, for a convenient way to create a Binder and bindings</a></span></li>
    
      <li><span class='object_link'><a href="Producers/AssistedInjectProducer.html" title="Puppet::Pops::Binder::Producers::AssistedInjectProducer (class)">AssistedInjectProducer, for more details on assisted injection</a></span></li>
    
  </ul>

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Injector/Private.html" title="Puppet::Pops::Binder::Injector::Private (module)">Private</a></span>
    
  
    
  
</p>

  <h2>Constant Summary</h2>
  







  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#get_contributions-instance_method" title="#get_contributions (instance method)">- (Array&lt;Puppet::Pops::Binder::InjectorEntry&gt;) <strong>get_contributions</strong>(scope, contributions_key) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the contributions to a multibind given its contribution key (as produced by the KeyFactory).</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Injector) <strong>initialize</strong>(configured_binder) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>An Injector is initialized with a configured <span class='object_link'><a href="Binder.html" title="Puppet::Pops::Binder::Binder (class)">Binder</a></span>.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#key_factory-instance_method" title="#key_factory (instance method)">- (Puppet::Pops::Binder::KeyFactory) <strong>key_factory</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The KeyFactory used to produce keys in this injector.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#lookup-instance_method" title="#lookup (instance method)">- (Object) <strong>lookup</strong>(scope, *args) {|value| ... }</a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Lookup (a.k.a "inject") of a value given a key.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#lookup_key-instance_method" title="#lookup_key (instance method)">- (Object<sup>?</sup>) <strong>lookup_key</strong>(scope, key) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Looks up the key and returns the entry, or nil if no entry is found.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#lookup_producer-instance_method" title="#lookup_producer (instance method)">- (Puppet::Pops::Binder::Producers::Producer, ...) <strong>lookup_producer</strong>(scope, *args) {|producer| ... }</a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Lookup (a.k.a "inject") producer of a value given a key.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#lookup_producer_key-instance_method" title="#lookup_producer_key (instance method)">- (Puppet::Pops::Binder::Producers::Producer<sup>?</sup>) <strong>lookup_producer_key</strong>(scope, key) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Looks up a Producer given an opaque binder key.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#lookup_producer_type-instance_method" title="#lookup_producer_type (instance method)">- (Puppet::Pops::Binder::Producers::Producer<sup>?</sup>) <strong>lookup_producer_type</strong>(scope, type, name = '') </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Looks up a Producer given a type/name key.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#lookup_type-instance_method" title="#lookup_type (instance method)">- (Object<sup>?</sup>) <strong>lookup_type</strong>(scope, type, name = '') </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Looks up a (typesafe) value based on a type/name combination.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#type_calculator-instance_method" title="#type_calculator (instance method)">- (Puppet::Pops::Types::TypeCalculator) <strong>type_calculator</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the TypeCalculator in use for keys.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Puppet::Pops::Binder::Injector (class)">Injector</a></span></tt>) <strong>initialize</strong>(configured_binder) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>An Injector is initialized with a configured <span class='object_link'><a href="Binder.html" title="Puppet::Pops::Binder::Binder (class)">Binder</a></span>.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>configured_binder</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Binder.html" title="Puppet::Pops::Binder::Binder (class)">Puppet::Pops::Binder::Binder</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The configured binder containing effective bindings. A given value
of nil creates an injector that returns or yields nil on all lookup requests.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>ArgumentError if the given binder is not fully configured</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


97
98
99
100
101
102
103</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/binder/injector.rb', line 97</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rubyid_configured_binder identifier id'>configured_binder</span><span class='rparen token'>)</span>
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_configured_binder identifier id'>configured_binder</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
    <span class='rubyid_@impl ivar id'>@impl</span> <span class='assign token'>=</span> <span class='rubyid_Private constant id'>Private</span><span class='colon2 op'>::</span><span class='rubyid_NullInjectorImpl constant id'>NullInjectorImpl</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
  <span class='rubyid_else else kw'>else</span>
    <span class='rubyid_@impl ivar id'>@impl</span> <span class='assign token'>=</span> <span class='rubyid_Private constant id'>Private</span><span class='colon2 op'>::</span><span class='rubyid_InjectorImpl constant id'>InjectorImpl</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_configured_binder identifier id'>configured_binder</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="get_contributions-instance_method">
  
    - (<tt><span class='object_link'>Array</span>&lt;<span class='object_link'><a href="InjectorEntry.html" title="Puppet::Pops::Binder::InjectorEntry (class)">Puppet::Pops::Binder::InjectorEntry</a></span>&gt;</tt>) <strong>get_contributions</strong>(scope, contributions_key) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the contributions to a multibind given its contribution key (as produced by the KeyFactory).
This method is typically used by multibind value producers, but may be used for introspection of the injector's state.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>scope</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Parser/Scope.html" title="Puppet::Parser::Scope (class)">Puppet::Parser::Scope</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the scope to use</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>contributions_key</span>
      
      
        <span class='type'>(<tt><span class='object_link'>Object</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Opaque key as produced by KeyFactory as the contributions key for a multibinding</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'>Array</span>&lt;<span class='object_link'><a href="InjectorEntry.html" title="Puppet::Pops::Binder::InjectorEntry (class)">Puppet::Pops::Binder::InjectorEntry</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the contributions sorted in deecending order of precedence</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


263
264
265</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/binder/injector.rb', line 263</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_get_contributions identifier id'>get_contributions</span><span class='lparen token'>(</span><span class='rubyid_scope identifier id'>scope</span><span class='comma token'>,</span> <span class='rubyid_contributions_key identifier id'>contributions_key</span><span class='rparen token'>)</span>
  <span class='rubyid_@impl ivar id'>@impl</span><span class='dot token'>.</span><span class='rubyid_get_contributions identifier id'>get_contributions</span><span class='lparen token'>(</span><span class='rubyid_scope identifier id'>scope</span><span class='comma token'>,</span> <span class='rubyid_contributions_key identifier id'>contributions_key</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="key_factory-instance_method">
  
    - (<tt><span class='object_link'><a href="KeyFactory.html" title="Puppet::Pops::Binder::KeyFactory (class)">Puppet::Pops::Binder::KeyFactory</a></span></tt>) <strong>key_factory</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The KeyFactory used to produce keys in this injector.
The factory is shared with the Binder to ensure consistent translation to keys.
A compatible type calculator can also be obtained from the key factory.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="KeyFactory.html" title="Puppet::Pops::Binder::KeyFactory (class)">Puppet::Pops::Binder::KeyFactory</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the key factory in use</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/binder/injector.rb', line 112</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_key_factory identifier id'>key_factory</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
  <span class='rubyid_@impl ivar id'>@impl</span><span class='dot token'>.</span><span class='rubyid_key_factory identifier id'>key_factory</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="lookup-instance_method">
  
    
      <span class="overload">- (<tt><span class='object_link'>Object</span></tt>) <strong>lookup</strong>(scope, key) </span>
    
      <span class="overload">- (<tt><span class='object_link'>Object</span></tt>) <strong>lookup</strong>(scope, type, name = '') </span>
    
      <span class="overload">- (<tt><span class='object_link'>Object</span></tt>) <strong>lookup</strong>(scope, name) </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Lookup (a.k.a "inject") of a value given a key.
The lookup may be called with different parameters. This method is a convenience method that
dispatches to one of #lookup_key or #lookup_type depending on the arguments. It also provides
the ability to use an optional block that is called with the looked up value, or scope and value if the
block takes two parameters. This is useful to provide a default value or other transformations, calculations
based on the result of the lookup.</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><span class='object_link'>Object</span></tt>) <strong>lookup</strong>(scope, key) </span>
        <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>scope</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Parser/Scope.html" title="Puppet::Parser::Scope (class)">Puppet::Parser::Scope</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the scope to use for evaluation</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt><span class='object_link'>Object</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>an opaque object being the full key</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><span class='object_link'>Object</span></tt>) <strong>lookup</strong>(scope, type, name = '') </span>
        <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>scope</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Parser/Scope.html" title="Puppet::Parser::Scope (class)">Puppet::Parser::Scope</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the scope to use for evaluation</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>type</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Types/PObjectType.html" title="Puppet::Pops::Types::PObjectType (class)">Puppet::Pops::Types::PObjectType</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the type of what to lookup</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>''</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the name to use, defaults to empty string (for unnamed)</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><span class='object_link'>Object</span></tt>) <strong>lookup</strong>(scope, name) </span>
        <div class="docstring">
  <div class="discussion">
    <p>Lookup of Data type with given name.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>scope</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Parser/Scope.html" title="Puppet::Parser::Scope (class)">Puppet::Parser::Scope</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the scope to use for evaluation</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the Data/name to lookup</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#lookup_type-instance_method" title="Puppet::Pops::Binder::Injector#lookup_type (method)">#lookup_type</a></span></li>
    
  </ul>

</div>
      </li>
    
  </ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>value</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>passes the looked up value to an optional block and returns what this block returns</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>scope</tt>, <tt>value</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>passes scope and value to the block and returns what this block returns</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>scope</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Parser/Scope.html" title="Puppet::Parser::Scope (class)">Puppet::Parser::Scope</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the scope given to lookup</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt><span class='object_link'>Object</span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the looked up value or nil if nothing was found</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the block has an arity that is not 1 or 2</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


159
160
161</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/binder/injector.rb', line 159</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_lookup identifier id'>lookup</span><span class='lparen token'>(</span><span class='rubyid_scope identifier id'>scope</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='rubyid_args identifier id'>args</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='rubyid_@impl ivar id'>@impl</span><span class='dot token'>.</span><span class='rubyid_lookup identifier id'>lookup</span><span class='lparen token'>(</span><span class='rubyid_scope identifier id'>scope</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='rubyid_args identifier id'>args</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="lookup_key-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt><sup>?</sup>) <strong>lookup_key</strong>(scope, key) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Looks up the key and returns the entry, or nil if no entry is found.
Produced type is checked for type conformance with its binding, but not with the lookup key.
(This since all subtypes of PDataType are looked up using a key based on PDataType).
Use the Puppet::Pops::Types::TypeCalculator#instance? method to check for conformance of the result
if this is wanted, or use #lookup_type.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt><span class='object_link'>Object</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>lookup of key as produced by the key factory</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'>Object</span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>produced value of type that conforms with bound type (type conformance with key not guaranteed).</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the produced value does not conform with the bound type</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


192
193
194</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/binder/injector.rb', line 192</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_lookup_key identifier id'>lookup_key</span><span class='lparen token'>(</span><span class='rubyid_scope identifier id'>scope</span><span class='comma token'>,</span> <span class='rubyid_key identifier id'>key</span><span class='rparen token'>)</span>
  <span class='rubyid_@impl ivar id'>@impl</span><span class='dot token'>.</span><span class='rubyid_lookup_key identifier id'>lookup_key</span><span class='lparen token'>(</span><span class='rubyid_scope identifier id'>scope</span><span class='comma token'>,</span> <span class='rubyid_key identifier id'>key</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="lookup_producer-instance_method">
  
    
      <span class="overload">- (<tt><span class='object_link'><a href="Producers/Producer.html" title="Puppet::Pops::Binder::Producers::Producer (class)">Puppet::Pops::Binder::Producers::Producer</a></span></tt>, ...) <strong>lookup_producer</strong>(scope, key) </span>
    
      <span class="overload">- (<tt><span class='object_link'><a href="Producers/Producer.html" title="Puppet::Pops::Binder::Producers::Producer (class)">Puppet::Pops::Binder::Producers::Producer</a></span></tt>, ...) <strong>lookup_producer</strong>(scope, type, name = '') </span>
    
      <span class="overload">- (<tt><span class='object_link'><a href="Producers/Producer.html" title="Puppet::Pops::Binder::Producers::Producer (class)">Puppet::Pops::Binder::Producers::Producer</a></span></tt>, ...) <strong>lookup_producer</strong>(scope, name) </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Lookup (a.k.a "inject") producer of a value given a key.
The producer lookup may be called with different parameters. This method is a convenience method that
dispatches to one of #lookup_producer_key or #lookup_producer_type depending on the arguments. It also provides
the ability to use an optional block that is called with the looked up producer, or scope and producer if the
block takes two parameters. This is useful to provide a default value, call a custom producer method,
or other transformations, calculations based on the result of the lookup.</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><span class='object_link'><a href="Producers/Producer.html" title="Puppet::Pops::Binder::Producers::Producer (class)">Puppet::Pops::Binder::Producers::Producer</a></span></tt>, ...) <strong>lookup_producer</strong>(scope, key) </span>
        <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>scope</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Parser/Scope.html" title="Puppet::Parser::Scope (class)">Puppet::Parser::Scope</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the scope to use for evaluation</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt><span class='object_link'>Object</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>an opaque object being the full key</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><span class='object_link'><a href="Producers/Producer.html" title="Puppet::Pops::Binder::Producers::Producer (class)">Puppet::Pops::Binder::Producers::Producer</a></span></tt>, ...) <strong>lookup_producer</strong>(scope, type, name = '') </span>
        <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>scope</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Parser/Scope.html" title="Puppet::Parser::Scope (class)">Puppet::Parser::Scope</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the scope to use for evaluation</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>type</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Types/PObjectType.html" title="Puppet::Pops::Types::PObjectType (class)">Puppet::Pops::Types::PObjectType</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>, the type of what to lookup</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>''</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>, the name to use, defaults to empty string (for unnamed)</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><span class='object_link'><a href="Producers/Producer.html" title="Puppet::Pops::Binder::Producers::Producer (class)">Puppet::Pops::Binder::Producers::Producer</a></span></tt>, ...) <strong>lookup_producer</strong>(scope, name) </span>
        <div class="docstring">
  <div class="discussion">
    <p>Lookup of Data type with given name.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>scope</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Parser/Scope.html" title="Puppet::Parser::Scope (class)">Puppet::Parser::Scope</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the scope to use for evaluation</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>, the Data/name to lookup</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#lookup_type-instance_method" title="Puppet::Pops::Binder::Injector#lookup_type (method)">#lookup_type</a></span></li>
    
  </ul>

</div>
      </li>
    
  </ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>producer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>passes the looked up producer to an optional block and returns what this block returns</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>scope</tt>, <tt>producer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>passes scope and producer to the block and returns what this block returns</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>producer</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Producers/Producer.html" title="Puppet::Pops::Binder::Producers::Producer (class)">Puppet::Pops::Binder::Producers::Producer</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the looked up producer or nil if nothing was bound</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>scope</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Parser/Scope.html" title="Puppet::Parser::Scope (class)">Puppet::Parser::Scope</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the scope given to lookup</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Producers/Producer.html" title="Puppet::Pops::Binder::Producers::Producer (class)">Puppet::Pops::Binder::Producers::Producer</a></span></tt>, <tt><span class='object_link'>Object</span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>a producer, or what the optional block returns</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the block has an arity that is not 1 or 2</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


231
232
233</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/binder/injector.rb', line 231</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_lookup_producer identifier id'>lookup_producer</span><span class='lparen token'>(</span><span class='rubyid_scope identifier id'>scope</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='rubyid_args identifier id'>args</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='rubyid_@impl ivar id'>@impl</span><span class='dot token'>.</span><span class='rubyid_lookup_producer identifier id'>lookup_producer</span><span class='lparen token'>(</span><span class='rubyid_scope identifier id'>scope</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='rubyid_args identifier id'>args</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="lookup_producer_key-instance_method">
  
    - (<tt><span class='object_link'><a href="Producers/Producer.html" title="Puppet::Pops::Binder::Producers::Producer (class)">Puppet::Pops::Binder::Producers::Producer</a></span></tt><sup>?</sup>) <strong>lookup_producer_key</strong>(scope, key) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Looks up a Producer given an opaque binder key.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Producers/Producer.html" title="Puppet::Pops::Binder::Producers::Producer (class)">Puppet::Pops::Binder::Producers::Producer</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the bound producer, or nil if no such producer was found.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


240
241
242</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/binder/injector.rb', line 240</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_lookup_producer_key identifier id'>lookup_producer_key</span><span class='lparen token'>(</span><span class='rubyid_scope identifier id'>scope</span><span class='comma token'>,</span> <span class='rubyid_key identifier id'>key</span><span class='rparen token'>)</span>
  <span class='rubyid_@impl ivar id'>@impl</span><span class='dot token'>.</span><span class='rubyid_lookup_producer_key identifier id'>lookup_producer_key</span><span class='lparen token'>(</span><span class='rubyid_scope identifier id'>scope</span><span class='comma token'>,</span> <span class='rubyid_key identifier id'>key</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="lookup_producer_type-instance_method">
  
    - (<tt><span class='object_link'><a href="Producers/Producer.html" title="Puppet::Pops::Binder::Producers::Producer (class)">Puppet::Pops::Binder::Producers::Producer</a></span></tt><sup>?</sup>) <strong>lookup_producer_type</strong>(scope, type, name = '') 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>The result is not type checked (it cannot be until the producer has produced an instance).</p>
</div>
  </div>

<p>Looks up a Producer given a type/name key.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Producers/Producer.html" title="Puppet::Pops::Binder::Producers::Producer (class)">Puppet::Pops::Binder::Producers::Producer</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the bound producer, or nil if no such producer was found</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


250
251
252</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/binder/injector.rb', line 250</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_lookup_producer_type identifier id'>lookup_producer_type</span><span class='lparen token'>(</span><span class='rubyid_scope identifier id'>scope</span><span class='comma token'>,</span> <span class='rubyid_type identifier id'>type</span><span class='comma token'>,</span> <span class='rubyid_name identifier id'>name</span><span class='assign token'>=</span><span class='string val'>''</span><span class='rparen token'>)</span>
  <span class='rubyid_@impl ivar id'>@impl</span><span class='dot token'>.</span><span class='rubyid_lookup_producer_type identifier id'>lookup_producer_type</span><span class='lparen token'>(</span><span class='rubyid_scope identifier id'>scope</span><span class='comma token'>,</span> <span class='rubyid_type identifier id'>type</span><span class='comma token'>,</span> <span class='rubyid_name identifier id'>name</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="lookup_type-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt><sup>?</sup>) <strong>lookup_type</strong>(scope, type, name = '') 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Looks up a (typesafe) value based on a type/name combination.
Creates a key for the type/name combination using a KeyFactory. Specialization of the Data type are transformed
to a Data key, and the result is type checked to conform with the given key.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>type</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Types/PObjectType.html" title="Puppet::Pops::Types::PObjectType (class)">Puppet::Pops::Types::PObjectType</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the type to lookup as defined by Puppet::Pops::Types::TypeFactory</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>''</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the (optional for non <code>Data</code> types) name of the entry to lookup.
The name may be an empty String (the default), but not nil. The name is required for lookup for subtypes of
<code>Data</code>.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'>Object</span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the looked up bound object, or nil if not found (type conformance with given type is guaranteed)</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the produced value does not conform with the given type</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


176
177
178</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/binder/injector.rb', line 176</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_lookup_type identifier id'>lookup_type</span><span class='lparen token'>(</span><span class='rubyid_scope identifier id'>scope</span><span class='comma token'>,</span> <span class='rubyid_type identifier id'>type</span><span class='comma token'>,</span> <span class='rubyid_name identifier id'>name</span><span class='assign token'>=</span><span class='string val'>''</span><span class='rparen token'>)</span>
  <span class='rubyid_@impl ivar id'>@impl</span><span class='dot token'>.</span><span class='rubyid_lookup_type identifier id'>lookup_type</span><span class='lparen token'>(</span><span class='rubyid_scope identifier id'>scope</span><span class='comma token'>,</span> <span class='rubyid_type identifier id'>type</span><span class='comma token'>,</span> <span class='rubyid_name identifier id'>name</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="type_calculator-instance_method">
  
    - (<tt><span class='object_link'><a href="../Types/TypeCalculator.html" title="Puppet::Pops::Types::TypeCalculator (class)">Puppet::Pops::Types::TypeCalculator</a></span></tt>) <strong>type_calculator</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the TypeCalculator in use for keys. The same calculator (as used for keys) should be used if there is a need
to check type conformance, or infer the type of Ruby objects.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Types/TypeCalculator.html" title="Puppet::Pops::Types::TypeCalculator (class)">Puppet::Pops::Types::TypeCalculator</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the type calculator that is in use for keys</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


122
123
124</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/pops/binder/injector.rb', line 122</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_type_calculator identifier id'>type_calculator</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
  <span class='rubyid_@impl ivar id'>@impl</span><span class='dot token'>.</span><span class='rubyid_type_calculator identifier id'>type_calculator</span><span class='lparen token'>(</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Wed Feb 19 13:52:31 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.3 (ruby-1.8.7).
</div>

  </body>
</html>